<!DOCTYPE html>
<html>
<head>
<!-- Required meta tags-->
<meta charset="utf-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<link rel="apple-touch-icon" href="/favicon.ico" />
<meta name="mobile-web-app-capable" content="yes">
<link rel="shortcut icon" sizes="196x196" href="/favicon.ico">
<link rel="shortcut icon" sizes="128x128" href="/favicon.ico">

<link rel="icon" href="/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
<link rel="apple-touch-icon" href="/favicon.ico" type="image/x-icon" />
<!-- Color theme for statusbar -->
<meta name="theme-color" content="#000000">

<script src="https://www.paypalobjects.com/api/checkout.js"></script>

<!-- Your app title -->
<title>ROSY THE BOT</title>
<link
	href="https://fonts.googleapis.com/css?family=Montserrat:400,700|Playfair+Display:400,700"
	rel="stylesheet">
<!-- Path to Framework7 Library CSS, Material Theme -->
<link rel="stylesheet" href="css/framework7.material.min.css">
<link rel="stylesheet" href="css/framework7.3dpanels.min.css">
<link rel="stylesheet" href="css/framework7.indexed-list.min.css">
<!-- Path to Framework7 color related styles, Material Theme -->
<link rel="stylesheet" href="css/framework7.material.colors.min.css">
<!-- Slick Carousel -->
<link rel="stylesheet" type="text/css" href="css/slick.css" />
<link rel="stylesheet" type="text/css" href="css/slick-theme.css" />
<!-- Font Awesome -->
<link rel="stylesheet" href="css/font-awesome.min.css" />
<link rel="stylesheet" href="css/font-awesome.css" />
<!-- UpScroller -->
<link rel="stylesheet" href="css/framework7.upscroller.min.css">
<!-- Path to your custom app styles-->
<link rel="stylesheet" href="font/flaticon.css">
<link rel="stylesheet" href="shop-cart/flaticon.css">
<!--style-->
<link rel="stylesheet" href="css/base.css">
<link rel="stylesheet" href="css/my-app.css">
</head>
<body class="theme-black">
	<!-- Status bar overlay for fullscreen mode-->
	<div class="statusbar-overlay"></div>
	<!-- Panels overlay-->
	<div class="panel-overlay"></div>
	<!-- /Right Panel -->
	<!-- Views -->

		<!-- Your main view, should have "view-main" class -->
		<div class="view view-main">
			<!-- Pages container, because we use fixed navbar and toolbar, it has additional appropriate classes-->
			<div class="pages">
				<!-- Page, data-page contains page name-->
				<div data-page="rosyCheckout" class="page">
					<!-- We don't need full layout here, because this page will be parsed with Ajax-->
					<!-- Top Navbar-->
					<div class="navbar">
						<div class="navbar-inner" style="padding-bottom: 10px">
							<div class="center sliding nv-checkout">
								<img height=40px width=40px src="images/robot2.png">Rosy
								The Bot - Checkout
							</div>
						</div>
					</div>
					<!-- Scrollable page content-->
					<div class="page-content">
						<div class="content-block">
							<div class="content-block-inner">
								<div class="cartbox margin-top-20 cartbox-border">
									<!--           <div class="cart-heading-1 ">
                     <h2><i class="fa fa-star-o"></i> Checkout</h2>
                  </div>-->
									<div class="check-contenttext">
										<div class="list-block accordion-list">
											<form id="rosyOrder">
												<input id="id" name="id" type="hidden" />
												<div style="" id="confirmMessage"></div>
												<div>&nbsp;</div>
												<h5>My Info</h5>
												<div>&nbsp;</div>
												<!-- full-name input-->
												<div class="control-group">
													<div class="controls">
														<input id="customerFullName" name="customerFullName"
															type="text" placeholder="my name" class="input-xlarge"
															onblur="updateRosyOrder()">

													</div>
												</div>
												<div class="control-group">
													<div class="controls">
														<input id="customerPhone" name="customerPhone" type="text"
															placeholder="my phone" class="input-xlarge"
															onblur="updateRosyOrder()">

													</div>
												</div>
												<div class="control-group">
													<div class="controls">
														<input id="customerEmail" name="customerEmail" type="text"
															placeholder="my email" class="input-xlarge"
															onblur="updateRosyOrder()">

													</div>
												</div>

												<!-- Address form -->
												<div>&nbsp;</div>
												<h5>Delivery Address</h5>
												<div>&nbsp;</div>
												<!-- full-name input-->
												<div class="control-group">
													<div class="controls">
														<input id="recipientFullName" name="recipientFullName"
															type="text" placeholder="Full Name of recipient"
															class="input-xlarge" onblur="updateRosyOrder()">

													</div>
												</div>
												<!-- full-name input-->
												<div class="control-group">
													<div class="controls">
														<input id="recipientPhone" name="recipientPhone"
															type="text" placeholder="recipient phone"
															class="input-xlarge" onblur="updateRosyOrder()">

													</div>
												</div>
												<!-- address-line1 input-->
												<div class="control-group">
													<div class="controls">
														<input id="recipientStreetAddress1"
															name="recipientStreetAddress1" type="text"
															placeholder="Street Address, P.O. Box, Company Name, c/o"
															class="input-xlarge" onblur="updateRosyOrder()">
													</div>
												</div>
												<!-- address-line2 input-->
												<div class="control-group">
													<div class="controls">
														<input id="recipientStreetAddress2"
															name="recipientStreetAddress2" type="text"
															placeholder="Apartment, Suite , Unit, Building, Floor, etc"
															class="input-xlarge" onblur="updateRosyOrder()">

													</div>
												</div>
												<!-- city input-->
												<div class="control-group">
													<div class="controls">
														<input id="recipientCity" name="recipientCity" type="text"
															placeholder="City" class="input-xlarge"
															onblur="updateRosyOrder()">

													</div>
												</div>
												<!-- region input-->
												<div class="control-group">
													<div class="controls">
														<input id="recipientState" name="recipientState"
															type="text" placeholder="State / Province / Region"
															class="input-xlarge" onblur="updateRosyOrder()">

													</div>
												</div>
												<!-- postal-code input-->
												<div class="control-group">
													<div class="controls">
														<input id="recipientPostalCode" name="recipientPostalCode"
															type="text" placeholder="Zip or Postal Code"
															class="input-xlarge" onblur="updateRosyOrder()">

													</div>
												</div>
												<!-- country select -->
												<div class="control-group">
													<div class="controls">
														<select id="recipientCountry" name="recipientCountry"
															class="input-xlarge">
															<option value="US">United States</option>
														</select>
													</div>
												</div>

												<div>&nbsp;</div>
												<h5>Order Info</h5>
												<div>&nbsp;</div>
												<div class="control-group">
													<label>Delivery Date</label>
													<div class="controls">
														<input id="deliveryDate" name="deliveryDate" type="text"
															placeholder="delivery date" class="input-xlarge"
															onblur="updateRosyOrder()">
													</div>
												</div>

												<div class="control-group">
													<label>Card Message</label>
													<div class="controls">
														<input id="cardMessage" name="cardMessage" type="text"
															placeholder="card message" class="input-xlarge"
															onblur="updateRosyOrder()">
													</div>
												</div>
												<div>
													<img id="rosyOrderImage" src="">
												</div>
												<div>&nbsp;</div>

												<table>
													<tr>
														<th class="text-center" id="productCode"></th>
													</tr>
													<tr>
														<td class="text-center" id="productName"></td>

													</tr>
													<tr>
														<th class="text-center">Order Total</th>
													</tr>
													<tr>
														<td class="text-center" id="orderTotal"></td>
													</tr>

												</table>


												<div>&nbsp;</div>
												<!-- 												<div class="inputbox"> -->

												<!-- 													<button class="mybutton" type="submit" form="rosyOrder">Place Order</button> -->
												<!-- 												</div> -->
												<div id="rosyClickableArea" class="fixed-footer">
													<div id="paypal-button-container"></div>

													<script>
														paypal.Button
																.render(
																		{

																			env : 'sandbox', // sandbox | production

																			style : {
																				size : 'responsive',
																				color : 'blue',
																				shape : 'rect',
																				label : 'buynow',
																				branding : true
																			},
																			// PayPal Client IDs - replace with your own
																			// Create a PayPal app: https://developer.paypal.com/developer/applications/create
																			client : {
																				//sandbox : 'AZDxjDScFpQtjWTOUtWKbyN_bDt4OgqaF4eYXlewfBP4-8aqX3PiV8e1GWU6liB2CUXlkA59kJXE7M6R',
																				sandbox : 'AekRwVJ1agXW4o00ZIPq7Mb4KY5My7uvBnlCJc6L-JI6lGbxzulA8ZNK2wglI768X7ATxVgjGkQBNji6'
																			//production : '<insert production client id>'
																			},
																			// Show the buyer a 'Pay Now' button in the checkout flow
																			commit : true,

																			// payment() is called when the button is clicked
																			payment : function(
																					data,
																					actions) {
																				//update rosy order here
																				var postData1 = new Object();
																				postData1.id = getURLParameter("ro");
																				postData2 = JSON
																						.stringify(postData1);
																				// maybe json stringify this oject to get it to post without
																				// the = sign ???
																				$
																						.ajax({
																							type : 'POST',
																							url : 'https://tn59sjpc9c.execute-api.us-east-1.amazonaws.com/dev/api/rosyorder',
																							data : postData2, // or JSON.stringify ({name:
																							async : false,
																							success : function(
																									data) {
																								jsonData = JSON
																										.parse(data);
																								total = jsonData.orderTotal;
																								productCode = jsonData.productCode;
																								productName = jsonData.productName;
																								imageUrl = jsonData.productImageUrl;
																								console
																										.log('image:'
																												+ imageUrl);
																							},
																							contentType : "application/json",
																							dataType : 'json'
																						});

																				return actions.payment
																						.create({
																							payment : {
																								transactions : [ {
																									amount : {
																										total : total,
																										currency : 'USD'

																									},
																									item_list : {
																										items : [ {
																											name : productCode,
																											description : productName,
																											currency : 'USD',
																											price : total,
																											quantity : 1
																										} ]
																									}
																								}

																								],
																								note_to_payer : 'Rosy will send you a text confirmation after checkout.'
																							},
																							experience : {
																								name : 'RosyTheBot.com',
																								presentation : {
																									brand_name : 'RosyTheBot.com',
																									// logo_image : (need an https server to host this image) 'http://www.rosythebot.com/images/robot2.png',
																									locale_code : 'US'
																								},
																								input_fields : {
																									no_shipping : 1
																								}
																							}
																						});
																			},

																			// onAuthorize() is called when the buyer approves the payment
																			onAuthorize : function(
																					data,
																					actions) {
																				console
																						.log("authorization complete");
																				console
																						.log(data);
																				var rosyPayId = data.paymentID;
																				console.log
																				// Make a call to the REST api to execute the payment
																				return actions.payment
																						.execute()
																						.then(
																								function() {
																									console
																											.log("execute payment complete");
																									//update rosyOrder in database after paypal called successfully
																									console
																											.log(rosyPayId);

																									var postData1 = new Object();
																									postData1.id = getURLParameter("ro");
																									postData1.paymentId = rosyPayId;
																									postData1.rosyOrderStatus = "PAID";

																									postData2 = JSON
																											.stringify(postData1);
																									// maybe json stringify this oject to get it to post without
																									// the = sign ???
																									$
																											.ajax({
																												type : 'POST',
																												url : 'https://tn59sjpc9c.execute-api.us-east-1.amazonaws.com/dev/api/rosyorder',
																												data : postData2, // or JSON.stringify ({name:
																												async : false,
																												success : function(
																														data) {

																													jsonData = JSON
																															.parse(data);
																													var rosyOrderId = jsonData.rosyOrderId;
																												},
																												contentType : "application/json",
																												dataType : 'json'
																											});

																									window.location
																											.replace("http://rosythebot.com?ro="
																													+ postData1.id);

																								});
																			}

																		},
																		'#paypal-button-container');
													</script>
												</div>

											</form>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	





	<!-- Path to Framework7 Library JS-->
<!-- 	<script type="text/javascript" src="js/framework7.min.js"></script>
	<script type="text/javascript" src="js/framework7.3dpanels.min.js"></script>
	<script type="text/javascript" src="js/framework7.indexed-list.min.js"></script> -->
	<!-- Slick Carousel -->
	<script type="text/javascript" src="js/jquery-1.12.3.min.js"></script>
<!-- 	<script type="text/javascript" src="js/slick.min.js"></script>
	UpScroller
	<script type="text/javascript" src="js/framework7.upscroller.min.js"></script>
	Charts
	<script type="text/javascript" src="js/chart.min.js"></script>
	Path to your app js
	<script type="text/javascript" src="js/my-app.js"></script> -->

	<script type="text/javascript" src="js/cart.js"></script>

</body>
<div class="modal"><!-- Place at bottom of page --></div>
</html>